{"version":3,"sources":["../src/config.js"],"names":["defaultConfig","intParamsList","freeConfig","pipelineCount","crawlerCount","mode","config","init","options","process","argv","slice","Object","keys","forEach","includes","key","parseInt","ENTERPEDITconfig"],"mappings":"kUAAA,oC;AACA,0B;;AAEA,IAAMA,gBAAgB;AACrB,cAAa,IADQ;AAErB,cAAa,QAFQ;AAGrB,gBAAe,CAAC,MAAD,CAHM;AAIrB,eAAc,kCAJO;AAKrB,qBAAoB,mBALC;AAMrB,cAAa,OANQ;AAOrB,cAAa,MAPQ;AAQrB,mBAAkB,yBARG;AASrB,mBAAkB,uBATG;AAUrB,kBAAiB,kBAVI;AAWrB,oBAAmB,iBAXE;AAYrB,mBAAkB,YAZG;AAarB,sBAAqB,gBAbA;AAcrB,8BAA6B,yBAdR;AAerB,6BAA4B,wBAfP;AAgBrB,2BAA0B,GAhBL;AAiBrB,4BAA2B,GAjBN;AAkBrB,WAAU,mBAlBW;AAmBrB,UAAS,cAnBY;AAoBrB,gBAAe,wBApBM;AAqBrB,eAAc,cArBO;AAsBrB,oBAAmB,EAtBE;AAuBrB,uBAAsB,EAvBD;;AAyBrB,eAAc,MAzBO;;AA2BrB,SAAQ,MA3Ba;;AA6BrB,WAAU,IA7BW;;AA+BrB,sBAAqB,MA/BA;;AAiCrB,uBAAsB,eAjCD;AAkCrB,wBAAuB,OAlCF;AAmCrB,2BAA0B,OAnCL;AAoCrB,uBAAsB,OApCD;AAqCrB,+BAA8B,UArCT;AAsCrB,uBAAsB,OAtCD;;AAwCrB,mBAAkB,EAxCG;;AA0CrB,uBAAsB,IA1CD;AA2CrB,kCAAiC,GA3CZ;;AA6CrB,eAAc,OA7CO;AA8CrB,qBAAoB,sBA9CC;AA+CrB,sBAAqB,uBA/CA;;AAiDrB,wBAAuB,EAjDF,EAAtB;;;AAoDA,IAAMC,gBAAgB,CAAC,eAAD,EAAkB,cAAlB,EAAkC,oBAAlC,EAAwD,+BAAxD,EAAyF,WAAzF,CAAtB;;AAEA,IAAMC,aAAa;AAClBC,gBAAe,CADG;AAElBC,eAAc,CAFI;AAGlBC,OAAM,IAHY,EAAnB;;;;;;;;;AAYA,IAAIC,SAAS,IAAb;;AAEA,IAAMC,OAAO,SAAPA,IAAO,GAAM;AAClB,KAAMC,UAAU,wBAAUC,QAAQC,IAAR,CAAaC,KAAb,CAAmB,CAAnB,CAAV,CAAhB;;AAEAC,QAAOC,IAAP,CAAYL,OAAZ,EAAqBM,OAArB,CAA6B,eAAO;AACnC,MAAIb,cAAcc,QAAd,CAAuBC,GAAvB,CAAJ,EAAiC;AAChCR,WAAQQ,GAAR,IAAeC,SAAST,QAAQQ,GAAR,CAAT,CAAf;AACA;AACD,EAJD;;AAMA,KAAI,OAAOE,gBAAP,KAA4B,WAAhC,EAA6C;AAC5CZ;AACIN,eADJ;;AAGIQ,SAHJ;;AAKA,EAND;AAOK;AACJF;AACIN,eADJ;AAEIQ,SAFJ;AAGIN,YAHJ;;AAKA;AACD,QAAOI,MAAP;AACA,CAxBD,C;;AA0BgB,YAAM;AACrB,QAAOA,WAAW,IAAX;AACJC,OADI;AAEJD,OAFH;AAGA,CAJc,E","file":"config.js","sourcesContent":["import parseArgs from 'minimist'\nimport url from 'url'\n\nconst defaultConfig = {\n\t\"localPort\": 8080,\n\t\"bodyLimit\": \"1024mb\",\n\t\"corsHeaders\": [\"Link\"],\n\t\"mongoDbUrl\": \"mongodb://ambar:27017/ambar_data\",\n\t\"elasticSearchUrl\": \"http://ambar:9200\",\n\t\"redisHost\": \"ambar\",\n\t\"redisPort\": \"6379\",\n\t\"dateTimeFormat\": \"YYYY-MM-DD HH:mm:ss.SSS\",\n\t\"esLogIndexName\": \"ambar_log_record_data\",\n\t\"esLogTypeName\": \"ambar_log_record\",\n\t\"esFileIndexName\": \"ambar_file_data\",\n\t\"esFileTypeName\": \"ambar_file\",\n\t\"esFileTagTypeName\": \"ambar_file_tag\",\n\t\"esFileNamedEntityTypeName\": \"ambar_file_named_entity\",\n\t\"esFileHiddenMarkTypeName\": \"ambar_file_hidden_mark\",\n\t\"crawlerContainerPrefix\": \"c\",\n\t\"pipelineContainerPrefix\": \"p\",\n\t\"apiUrl\": \"http://ambar:8004\",\n\t\"feUrl\": \"http://ambar\",\n\t\"mandrillKey\": \"uQzk-jUPZIuqSjRN2FfjjQ\",\n\t\"rabbitHost\": \"amqp://ambar\",\n\t\"dropboxClientId\": \"\",\n\t\"dropboxRedirectUri\": \"\",\n\n\t\"nerEnabled\": \"true\",\n\n\t\"auth\": \"none\",\n\n\t\"uiLang\": \"en\",\n\n\t\"preserveOriginals\": \"true\",\n\n\t\"defaultAccountName\": \"Administrator\",\n\t\"defaultAccountEmail\": \"admin\",\n\t\"defaultAccountPassword\": \"admin\",\n\t\"defaultAccountPlan\": \"unlim\",\n\t\"defaultAccountLangAnalyzer\": \"ambar_en\",\n\t\"defaultAccountRole\": \"admin\",\n\n\t\"analyticsToken\": \"\",\n\n\t\"ocrPdfMaxPageCount\": 1000,\n\t\"ocrPdfSymbolsPerPageThreshold\": 100,\n\n\t\"dockerRepo\": \"ambar\",\n\t\"crawlerImageName\": \"ambar-crawler:latest\",\n\t\"pipelineImageName\": \"ambar-pipeline:latest\",\n\n\t\"defaultTaggingRules\": []\n}\n\nconst intParamsList = ['pipelineCount', 'crawlerCount', 'ocrPdfMaxPageCount', 'ocrPdfSymbolsPerPageThreshold', 'localPort']\n\nconst freeConfig = {\n\tpipelineCount: 1,\n\tcrawlerCount: 1,\n\tmode: 'ce'\n}\n\nconst ENTERPEDITconfig = {\n\tpipelineCount: 2,\n\tcrawlerCount: 2,\n\tmode: 'ee'\n}\n\nlet config = null\n\nconst init = () => {\n\tconst options = parseArgs(process.argv.slice(2))\n\n\tObject.keys(options).forEach(key => {\n\t\tif (intParamsList.includes(key)) {\n\t\t\toptions[key] = parseInt(options[key])\n\t\t}\n\t})\n\n\tif (typeof ENTERPEDITconfig !== 'undefined') {\n\t\tconfig = {\n\t\t\t...defaultConfig,\n\t\t\t...ENTERPEDITconfig,\n\t\t\t...options\n\t\t}\n\t}\n\telse {\n\t\tconfig = {\n\t\t\t...defaultConfig,\n\t\t\t...options,\n\t\t\t...freeConfig\n\t\t}\n\t}\n\treturn config\n}\n\nexport default (() => {\n\treturn config === null\n\t\t? init()\n\t\t: config\n})()\n\n\n"]}